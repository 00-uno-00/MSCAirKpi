#TODO move graphic functions to a separate file